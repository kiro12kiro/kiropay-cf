<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiropay</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="container">
        <div id="message" class="system-message"></div>

        <div class="form-container">
            <h2>تسجيل الدخول</h2>
            <form id="login-form" class="form-group">
                <input type="email" id="email" placeholder="البريد الإلكتروني" required>
                <input type="password" id="password" placeholder="كلمة المرور" required>
                <button type="submit">دخول</button>
            </form>

            <h2 style="margin-top: 30px;">تسجيل جديد</h2>
            <form id="signup-form" class="form-group">
                <input type="text" id="name" placeholder="الاسم الشخصي" required>
                <select id="family" required>
                    <option value="" disabled selected>اختر عائلتك</option>
                    <option value="اسرة الانبا موسي الاسود">اسرة الانبا موسي الاسود</option>
                    <option value="اسرة مارجرس">اسرة مارجرس</option>
                    <option value="اسرة الانبا كاراس">اسرة الانبا كاراس</option>
                </select>
                <input type="email" id="signup-email" placeholder="البريد الإلكتروني" required>
                <input type="password" id="signup-password" placeholder="كلمة المرور (أقل شيء 6 حروف)" required>

                <div class="avatar-upload-section">
                    <label for="signup-avatar-file" class="custom-file-upload">
                        اختيار صورة شخصية (اختياري)
                    </label>
                    <input type="file" id="signup-avatar-file" accept="image/*" style="display: none;">
                </div>
                
                <button type="submit">تسجيل</button>
            </form>
        </div>

        <div class="card-container" id="card-container" style="display: none;">
            
            <div class="user-card">
                <div class="avatar-container">
                    <img id="user-avatar" src="/default-avatar.png" alt="صورة المستخدم" class="user-avatar">
                    <label id="avatar-overlay-label" for="avatar-upload-input" class="avatar-overlay" style="display: none;">
                        <span>تغيير</span>
                    </label>
                    <input type="file" id="avatar-upload-input" accept="image/*" style="display: none;">
                </div>
                
                <p id="user-name">الاسم: </p>
                <p id="user-family">العائلة: </p>
                <p id="user-balance">الرصيد: $0</p>
                <div class="action-buttons-group">
                    <button id="logout-btn" class="logout-btn">تسجيل الخروج</button>
                    <button id="refresh-data-btn" class="refresh-data-btn">تحديث البيانات</button>
                    <button id="unlocked-items-btn" class="unlocked-items-btn" style="display: none;">مشترياتي</button>
                </div>
            </div>

            <div class="transaction-history">
                <h3>سجل المعاملات</h3>
                <ul id="transaction-list">
                    </ul>
            </div>
            
            <div id="user-announcement-box" class="announcement-box" style="display: none;">
                <h3>إعلان هام</h3>
                <p id="user-announcement-text"></p>
            </div>


            <div id="unlocked-items-container" class="unlocked-items-container" style="display: none;">
                <button id="back-to-store-btn" class="back-to-store-btn">العودة للرئيسية</button>
                <h3>مشترياتي السابقة</h3>
                <div id="unlocked-items-list" class="store-items-grid">
                    </div>
                <p id="unlocked-items-message" class="system-message"></p>
            </div>
            
            <div id="store-container" class="store-container" style="display: none;">
                <h3>متجر النقاط</h3>
                <p id="store-loading-message" style="text-align: center; color: blue;"></p>
                <div id="store-items-list" class="store-items-grid">
                    </div>
                <p id="store-message" class="system-message"></p>
            </div>

            <div id="quiz-container" class="quiz-container" style="display: none;">
                <h3>سؤال اليوم</h3>
                <div class="quiz-box">
                    <p id="quiz-question-text" class="quiz-question-text">جاري تحميل السؤال...</p>
                    <div class="quiz-options">
                        <button class="quiz-option-btn" id="quiz-btn-a" data-value="A"></button>
                        <button class="quiz-option-btn" id="quiz-btn-b" data-value="B"></button>
                        <button class="quiz-option-btn" id="quiz-btn-c" data-value="C"></button>
                    </div>
                    <button id="quiz-submit-btn" class="quiz-submit-btn" disabled>تأكيد الإجابة</button>
                    <p id="quiz-message" class="system-message"></p>
                </div>
            </div>

            <div id="leaderboard-container" class="leaderboard-container" style="display: none;">
                <h3>لوحة الصدارة</h3>
                
                <div class="champions-section">
                    <h4>أبطال الصدارة</h4>
                    <div id="top-champions-list" class="champions-grid">
                        </div>
                </div>

                <div class="family-leaderboards">
                    <h4>صدارة العائلات (أعلى 10)</h4>
                    <div class="leaderboard-columns">
                        <div class="family-column">
                            <h5>أسرة الأنبا موسى الأسود</h5>
                            <ol id="family-anba-moussa-list"><li>جاري التحميل...</li></ol>
                        </div>
                        <div class="family-column">
                            <h5>أسرة مارجرجس</h5>
                            <ol id="family-margerges-list"><li>جاري التحميل...</li></ol>
                        </div>
                        <div class="family-column">
                            <h5>أسرة الأنبا كاراس</h5>
                            <ol id="family-anba-karas-list"><li>جاري التحميل...</li></ol>
                        </div>
                    </div>
                </div>
            </div>

        </div> <div id="admin-panel" class="admin-panel" style="display: none;">
            <h2>لوحة تحكم الأدمن</h2>
            
            <div class="admin-section">
                <h3>إدارة الإعلانات</h3>
                <form id="admin-announcement-form" class="form-group">
                    <textarea id="admin-announcement-text" placeholder="نص الإعلان الذي سيظهر للمستخدمين" rows="3"></textarea>
                    <button type="submit">نشر الإعلان</button>
                </form>
                <p id="admin-announcement-message" class="system-message"></p>
            </div>

            <div class="admin-section">
                <h3>إدارة المتجر</h3>
                
                <h4>إضافة عنصر جديد</h4>
                <form id="admin-add-item-form" class="form-group">
                    <input type="text" id="store-item-name" placeholder="اسم المنتج" required>
                    <input type="number" id="store-item-price" placeholder="سعر المنتج (نقاط)" required min="1">
                    <label for="store-item-image-file" class="custom-file-upload">
                        صورة المنتج (اختياري)
                    </label>
                    <input type="file" id="store-item-image-file" accept="image/*" style="display: none;">
                    <button type="submit">إضافة المنتج</button>
                </form>
                <p id="admin-store-message" class="system-message"></p>

                <h4 style="margin-top: 20px;">العناصر المضافة حالياً</h4>
                <ul id="admin-store-items-list" class="admin-store-list">
                    </ul>
            </div>
            
            <div class="admin-section">
                <h3>البحث عن مستخدم وتعديل رصيده</h3>
                <form id="admin-search-form" class="form-group">
                    <input type="text" id="admin-search-name" placeholder="ابحث بالاسم">
                    <button type="submit">بحث</button>
                </form>
                <p id="admin-search-message" class="system-message"></p>
                
                <div id="admin-results-list" style="display: none;">
                    <select id="admin-select-user"></select>
                </div>
                
                <div id="admin-searched-user-card" class="searched-user-card" style="display: none;">
                    <p id="searched-user-name"></p>
                    <p id="searched-user-family"></p>
                    <p id="searched-user-email"></p>
                    <p id="searched-user-balance"></p>
                    
                    <div class="balance-controls">
                        <input type="number" id="admin-balance-amount" placeholder="مقدار النقطة">
                        <button id="admin-add-balance-btn" class="add-btn">إضافة</button>
                        <button id="admin-subtract-balance-btn" class="subtract-btn">خصم</button>
                    </div>
                    <p id="admin-balance-message" class="system-message"></p>
                    
                    <button id="admin-delete-user-btn" class="delete-btn" style="margin-top: 15px;">حذف المستخدم</button>
                    <p id="admin-delete-message" class="system-message"></p>
                </div>
            </div>

            <div class="admin-section">
                <h3>إدارة الأسر (تحديث جماعي)</h3>
                <div class="family-buttons-group">
                    <button class="family-btn" data-family="اسرة الانبا موسي الاسود">الأنبا موسى الأسود</button>
                    <button class="family-btn" data-family="اسرة مارجرس">مارجرجس</button>
                    <button class="family-btn" data-family="اسرة الانبا كاراس">الأنبا كاراس</button>
                </div>
                <p id="admin-family-message" class="system-message"></p>

                <div id="mass-update-controls" class="mass-update-controls" style="display: none;">
                    <p>تم تحديد: <strong id="selected-users-count">0</strong> مستخدم</p>
                    <div class="balance-controls">
                        <input type="number" id="mass-update-amount" placeholder="مقدار النقطة" min="1">
                        <button id="mass-update-add-btn" class="add-btn">إضافة جماعية</button>
                        <button id="mass-update-subtract-btn" class="subtract-btn">خصم جماعي</button>
                    </div>
                    <p id="mass-update-message" class="system-message"></p>
                </div>

                <div id="admin-family-results" class="admin-family-results">
                    </div>
            </div>

            <div class="admin-section">
                <h3>إضافة سؤال جديد (كويز)</h3>
                <form id="admin-quiz-form" class="form-group">
                    <input type="text" id="quiz-question" placeholder="نص السؤال" required>
                    <input type="text" id="quiz-opt-a" placeholder="الخيار أ" required>
                    <input type="text" id="quiz-opt-b" placeholder="الخيار ب" required>
                    <input type="text" id="quiz-opt-c" placeholder="الخيار ج" required>
                    <select id="quiz-correct-opt" required>
                        <option value="" disabled selected>الإجابة الصحيحة</option>
                        <option value="A">أ</option>
                        <option value="B">ب</option>
                        <option value="C">ج</option>
                    </select>
                    <input type="number" id="quiz-points" placeholder="نقاط السؤال" required min="1">
                    <button type="submit">إضافة السؤال</button>
                </form>
                <p id="admin-quiz-message" class="system-message"></p>
            </div>


        </div> </div>

    <script src="app.js"></script>
</body>
</html>
